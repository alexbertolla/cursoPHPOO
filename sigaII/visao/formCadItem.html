<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/estiloFontes.css">
        <link rel="stylesheet" href="css/estiloBotoes.css">
        <link rel="stylesheet" href="css/estiloFormularios.css">

        <script src="js/jquery.js"></script>
        <script src="js/acaoFormularios.js"></script>
        <!--<script src="js/cadastros/formCadItem.js"></script>-->
        <!--<script src="js/cadastros/formCadMaterialPermanente.js"></script>-->
        <script>
            $(document).ready(function () {
                var selectND = $("#selectND");

                var listarNaturezaDespesasAtivas = function () {
                    var parametros = {opcao: "listarAtivas"};
                    requisicaoAjax($("#urlND").val(), parametros, resultadoListarNaturezaDespesasAtivas);
                };

                var resultadoListarNaturezaDespesasAtivas = function (retornoListaND) {
                    console.log(retornoListaND);
                    $(retornoListaND.dados).each(function () {
                        var naturezaDespesa = $(this)[0];
                        var option = criarOption(naturezaDespesa.id, naturezaDespesa.nome, false);
                        $(selectND).append(option);
                    });
                };
                
                var listarGruposPorND = function (naturezaDespesaId) {
                    var parametros = {opcao: "listarAtivosPorNaturezaDespesaId", naturezaDespesaId:naturezaDespesaId};
                    requisicaoAjax($("#urlGrupo").val(), parametros, resultadoListarGruposPorND);
                };

                var resultadoListarGruposPorND = function (retornoListaGrupos) {
                    var selectGrupo = $("#selectGrupo");
                    $(selectGrupo).children().remove();
                    console.log(retornoListaGrupos);
                    $(retornoListaGrupos.dados).each(function () {
                        var grupo = $(this)[0];
                        var option = criarOption(grupo.id, grupo.nome, false);
                        $(selectGrupo).append(option);
                    });
                };

                listarNaturezaDespesasAtivas();

                $(selectND).change(function () {
                    var naturezaDespesaId = $(this).val();
                    listarGruposPorND(naturezaDespesaId);
                });

            });
        </script>

    </head>

    <body>
        

        <div id="divSelectND">
            
        </div>

        <div id="divFormCadItem">
            <form id="formCadItem" name="formCadItem" method="post" action="">
<!--                <span >
                    <input type="text" id="url" value="../servlets/cadastros/ServletMaterialConsumo.php" readonly=""/>
                    <input type="text" id="id" name="id"  placeholder="id" readonly=""/>
                    <input type="text" id="opcao" name="opcao" value=""  placeholder="opcao" readonly=""/>
                </span>-->
                
                <ul class="liFormulario">
                    <li>
                        <input type="text" id="urlND" value="../servlets/cadastros/ServletNaturezaDespesa.php" readonly=""/>
                        <select id="selectND" name="naturezaDespesaId"></select>
                        <button type="button" id="botaoAddND" class="botaoNovo">+</button>
                    </li>
                </ul>
                <ul class="liFormulario">
                    <li>
                        <input type="text" id="urlGrupo" value="../servlets/cadastros/ServletGrupo.php" readonly="" hidden=""/>
                        <label id="labelGrupo">Grupo</label>
                        <select id="selectGrupo" name="grupoId"></select>
                        <button type="button" id="botaoAddGrupo" class="botaoNovo">+</button>
                    </li>
                </ul>
                <ul class="liFormulario">
                    <li>
                        <input type="text" id="urlAlmoxarifadoVirtual" value="../servlets/cadastros/ServletAlmoxarifadoVirtual.php" readonly="" hidden=""/>
                        <label id="labelAlmoxarifadoVirtual">Almoxarifado Virtual</label>
                        <select id="selectAlmoxarifadoVirtual" name="almoxarifadoVirtualId"></select>
                        <button type="button" id="botaoAddAV" class="botaoNovo">+</button>
                    </li>
                </ul>

                <ul class="liFormulario">
                    <li>
                        <label id="labelCodigo">Código</label>
                        <input type="text" id="codigo" name="codigo" maxlength="8" required=""/>
                    </li>
                    <li>
                        <label id="labelNome">Nome</label>
                        <input type="text" id="nome" name="nome" required=""/>
                    </li>
                    <li>
                        <label id="labelDescricao">Descrição</label><br/>
                        <textarea id="descricao" name="descricao" required=""></textarea>
                    </li>
                    
                    <li>
                        <label id="labelSituacao">Ativo</label>
                        <input type="checkbox" id="situacao" name="situacao" value="1" checked=""/>
                    </li>
                    
                    <li>
                        <button type="reset" id="reset">reset</button>
                        <button type="button" id="botaoCancelar">Cancelar</button>
                        <button type="submit" id="botaoSalvar">Salvar</button>
                    </li>
                </ul>

            </form>
        </div>

        <div id="divFormCadItemEspecifico"></div>
    </body>
</html>
